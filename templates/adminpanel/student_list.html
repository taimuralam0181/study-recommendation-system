{% extends "base.html" %}
{% block title %}Students | Teacher Panel{% endblock %}

{% block content %}
<div class="d-flex align-items-center justify-content-between mb-3">
  <h3 class="mb-0">Students</h3>
  <a class="btn btn-outline-secondary" href="{% url 'teacher_dashboard' %}">Back</a>
</div>

<style>
  .level-beginner { color: #b00020; font-weight: 700; }
  .level-intermediate { color: #d27a00; font-weight: 700; }
  .level-advanced { color: #1b7f3b; font-weight: 700; }
</style>

{% if students %}
  <div class="table-responsive">
    <table class="table table-striped table-bordered align-middle">
      <thead class="table-light">
        <tr>
          <th>Username</th>
          <th>Math</th>
          <th>Physics</th>
          <th>Computer Science</th>
          <th>Average</th>
          <th>Level</th>
        </tr>
      </thead>
      <tbody>
        {% for student in students %}
          <tr>
            <td>{{ student.user.username }}</td>
            <td>{{ student.math_marks }}</td>
            <td>{{ student.physics_marks }}</td>
            <td>{{ student.cs_marks }}</td>
            <td>{{ student.avg_score|floatformat:1 }}</td>
            <td>
              <span class="
                {% if student.level == 'Beginner' %}level-beginner{% endif %}
                {% if student.level == 'Intermediate' %}level-intermediate{% endif %}
                {% if student.level == 'Advanced' %}level-advanced{% endif %}
              ">
                {{ student.level }}
              </span>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% else %}
  <div class="alert alert-warning">No student data available.</div>
{% endif %}
{% endblock %}
